<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
	
	<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
	
    <title>Admin Appointments</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>

<div class="container mt-4">

    <div class="d-flex justify-content-between align-items-center mb-3">
        <h3>üßë‚Äç‚öïÔ∏è Pending Appointments</h3>
        <a href="/admin/dashboard" class="btn btn-secondary">‚¨Ö Back to Home</a>
    </div>

    <table class="table table-bordered">
        <thead class="table-dark">
        <tr>
            <th>Patient Name</th>
            <th>Requested Doctor</th>
            <th>Appointment Date</th>
            <th>Action</th>
        </tr>
        </thead>

        <tbody>

        <!-- If no appointments -->
        <tr th:if="${appointments.empty}">
            <td colspan="4" class="text-center text-muted">
                No pending appointments
            </td>
        </tr>

        <!-- Appointment rows -->
        <tr th:each="appt : ${appointments}">
            <td th:text="${appt.patientName}"></td>
            <td th:text="${appt.doctorName}"></td>
            <td th:text="${appt.appointmentDate}"></td>

            <td class="d-flex gap-2">

                <!-- APPROVE -->
                <form th:action="@{/admin/appointments/approve}" method="post">
                    <input type="hidden" name="appointmentId" th:value="${appt.id}">
                    <button type="submit" class="btn btn-success btn-sm">
                        ‚úÖ Approve
                    </button>
                </form>

                <!-- REJECT -->
                <form th:action="@{/admin/appointments/reject}" method="post">
                    <input type="hidden" name="appointmentId" th:value="${appt.id}">
                    <button type="submit" class="btn btn-danger btn-sm">
                        ‚ùå Reject
                    </button>
                </form>

            </td>
        </tr>

        </tbody>
    </table>

</div>

<!-- APPOINTMENT APPROVED -->
<script th:if="${appointmentApproved}">
    Swal.fire({
        icon: 'success',
        title: 'Assigned Successfully!',
        text: 'The appointment has been approved and assigned to the doctor.',
        timer: 2500,
        showConfirmButton: false
    });
</script>

<!-- APPOINTMENT REJECTED -->
<script th:if="${appointmentRejected}">
    Swal.fire({
        icon: 'info',
        title: 'Appointment Rejected',
        text: 'The appointment request has been rejected.',
        timer: 2500,
        showConfirmButton: false
    });
</script>


</body>
</html>
